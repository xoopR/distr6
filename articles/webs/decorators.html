<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decorators • distr6</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Decorators">
<meta property="og:description" content="distr6">
<meta property="og:image" content="https://alan-turing-institute.github.io/distr6/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">distr6</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basic
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/intro_to_r6.html">Introduction to R6</a>
    </li>
    <li>
      <a href="../../articles/webs/constructing_a_distribution.html">Constructing a Distribution</a>
    </li>
    <li>
      <a href="../../articles/webs/parameters.html">Getting and Setting Parameters</a>
    </li>
    <li>
      <a href="../../articles/webs/statistical_methods.html">Statistical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/properties_traits.html">Properties and Traits</a>
    </li>
    <li>
      <a href="../../articles/webs/multivariates.html">Multivariate Distributions</a>
    </li>
    <li>
      <a href="../../articles/webs/listing.html">Listing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/s3_piping.html">S3 and Piping</a>
    </li>
    <li>
      <a href="../../articles/webs/decorators.html">Decorators</a>
    </li>
    <li>
      <a href="../../articles/webs/wrappers.html">Wrappers</a>
    </li>
    <li>
      <a href="../../articles/webs/custom_distributions.html">Custom Distributions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extension Guidelines
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/preliminaries.html">Preliminaries</a>
    </li>
    <li>
      <a href="../../articles/webs/create_sdistribution.html">Creating an SDistribution</a>
    </li>
    <li>
      <a href="../../articles/webs/create_kernel.html">Creating a Kernel</a>
    </li>
    <li>
      <a href="../../articles/webs/create_decorator.html">Creating a Decorator</a>
    </li>
    <li>
      <a href="../../articles/webs/create_wrapper.html">Creating a Wrapper</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendices
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://raphaels1.github.io/pdfs/distr6Cheatsheet.pdf">Cheatsheet</a>
    </li>
    <li>
      <a href="../../articles/webs/api_lifecycle.html">API Lifecycle</a>
    </li>
    <li>
      <a href="../../articles/webs/analytic_and_numeric_methods.html">Analytical and Numerical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/r6_and_design_patterns.html">R6 and Design Patterns</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/RaphaelS1/distr6">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="decorators_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Decorators</h1>
            
            <h4 class="date">2020-07-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/alan-turing-institute/distr6/blob/master/vignettes/webs/decorators.rmd"><code>vignettes/webs/decorators.rmd</code></a></small>
      <div class="hidden name"><code>decorators.rmd</code></div>

    </div>

    
    
<p>The <a href="https://alan-turing-institute.github.io/distr6/articles/webs/s3_piping.html">previous tutorial</a> introduced S3 and piping into distr6, allowing different approaches to calling R6 methods. In this tutorial we take a look at a big feature of distr6, decorators.</p>
<p>Note: Decorators in distr6 are still maturing, this means the API is still subject to minor changes and the internal computations may be improved, therefore we are aware performance may be sub-optimal.</p>
<div id="decorators" class="section level2">
<h2 class="hasAnchor">
<a href="#decorators" class="anchor"></a>Decorators</h2>
<p>In object-oriented programming it is common to discuss ‘Design Patterns’ as specific methods used to solve coding problems, decorators are one of these ‘patterns’. For full definitions and details about design patterns, we refer the reader to the seminal Design Patterns textbook <span class="citation">(Gamma et al. 1994)</span>. Briefly, the decorator design pattern is used to add functionality to an object. For example, say we have a class that only has a <code>print</code> method and a decorator for <code>summary</code> methods. Then the user can either use the object by itself with the <code>print</code> method only or optionally you can ‘decorate’ the object and thereby use the <code>summary</code> method. This is perhaps confusing in the abstract, so lets work through an example in distr6. We will go through a quick example and then return to which decorators are available and how they are used in distr6:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">N</span> <span class="kw">&lt;-</span> <span class="no">Normal</span>$<span class="fu">new</span>()
<span class="no">N</span>$<span class="fu"><a href="../../reference/survival.html">survival</a></span>(<span class="fl">1</span>)
<span class="co">#&gt; Error in eval(expr, envir, enclos): attempt to apply non-function</span>
<span class="fu"><a href="../../reference/decorate.html">decorate</a></span>(<span class="no">N</span>, <span class="st">"ExoticStatistics"</span>)
<span class="co">#&gt; Normal is now decorated with ExoticStatistics</span>
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span>
<span class="no">N</span>$<span class="fu"><a href="../../reference/survival.html">survival</a></span>(<span class="fl">1</span>)
<span class="co">#&gt; [1] 0.1586553</span></pre></body></html></div>
<p>In the example above we:</p>
<ol style="list-style-type: decimal">
<li>Constructed a Normal distribution</li>
<li>Demonstrated that the <code>survival</code> method does not exist</li>
<li>Decorated the distribution with the <code>ExoticStatistics</code> decorator</li>
<li>Successfully evaluated the survival function</li>
</ol>
<div id="corestatistics" class="section level3">
<h3 class="hasAnchor">
<a href="#corestatistics" class="anchor"></a>CoreStatistics</h3>
<p>The CoreStatistics decorator includes methods for numeric calculations, a generalised moments <code>kthmoment</code> function and a generalised expectation method <code>genExp</code>. All methods can be viewed using <code><a href="../../reference/CoreStatistics.html">?CoreStatistics</a></code>. In distr6 we have a strict design principle that only analytic results should be provided as methods in distributions, i.e. we only return results for which we know the output is 100% accurate. The <code>CoreStatistics</code> decorator allows you to return numeric results when analytic ones aren’t available. For example,</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">w</span> <span class="kw">&lt;-</span> <span class="no">Weibull</span>$<span class="fu">new</span>()

<span class="co"># Error as the characteristic function doesn't exist</span>
<span class="no">w</span>$<span class="fu"><a href="../../reference/cf.html">cf</a></span>(<span class="fl">1</span>)
<span class="co">#&gt; Error in eval(expr, envir, enclos): attempt to apply non-function</span>
<span class="fu"><a href="../../reference/decorate.html">decorate</a></span>(<span class="no">w</span>, <span class="st">"CoreStatistics"</span>)
<span class="co">#&gt; Weibull is now decorated with CoreStatistics</span>
<span class="co">#&gt; Weibull(shape = 1, scale = 1, altscale = 1)</span>

<span class="co"># Warning as numerical integration used</span>
<span class="no">w</span>$<span class="fu"><a href="../../reference/cf.html">cf</a></span>(<span class="fl">5</span>)
<span class="co">#&gt; Results from numeric calculations are approximate only. Better results may be available.</span>
<span class="co">#&gt; Results from numeric calculations are approximate only. Better results may be available.</span>
<span class="co">#&gt; [1] 0.0384616+0.1923076i</span></pre></body></html></div>
<p>The decorator also introduces generalised moment and expectation methods. The help documentation for these <code><a href="../../reference/kthmoment.html">?kthmoment</a></code> and <code><a href="../../reference/genExp.html">?genExp</a></code> give a full overview to these methods, but both are very useful for modelling, inference and deriving other numeric results.</p>
</div>
<div id="exoticstatistics" class="section level3">
<h3 class="hasAnchor">
<a href="#exoticstatistics" class="anchor"></a>ExoticStatistics</h3>
<p>The ExoticStatistics decorator includes more complex numeric methods as well as survival, hazard and cumulative hazard that may or may not be analytic expressions (depending what is available in the distribution object). Once again all the methods added by this decorator can be viewed using <code><a href="../../reference/ExoticStatistics.html">?ExoticStatistics</a></code>. For example,</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">N</span> <span class="kw">&lt;-</span> <span class="no">Normal</span>$<span class="fu">new</span>()

<span class="co"># Error as the characteristic function doesn't exist</span>
<span class="no">N</span>$<span class="fu"><a href="../../reference/hazard.html">hazard</a></span>(<span class="fl">1</span>)
<span class="co">#&gt; Error in eval(expr, envir, enclos): attempt to apply non-function</span>
<span class="fu"><a href="../../reference/decorate.html">decorate</a></span>(<span class="no">N</span>, <span class="st">"ExoticStatistics"</span>)
<span class="co">#&gt; Normal is now decorated with ExoticStatistics</span>
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span>

<span class="co"># No warning as an analytic expression using pdf and cdf are used</span>
<span class="no">N</span>$<span class="fu"><a href="../../reference/hazard.html">hazard</a></span>(<span class="fl">1</span>)
<span class="co">#&gt; [1] 1.525135</span>

<span class="co"># Warning as numeric calculations are used</span>
<span class="no">N</span>$<span class="fu"><a href="../../reference/pdfPNorm.html">pdfPNorm</a></span>(<span class="fl">2</span>,<span class="fl">0</span>,<span class="fl">4</span>)
<span class="co">#&gt; Results from numeric calculations are approximate only. Better results may be available.</span>
<span class="co">#&gt; [1] 0.3755628</span></pre></body></html></div>
</div>
<div id="functionimputation" class="section level3">
<h3 class="hasAnchor">
<a href="#functionimputation" class="anchor"></a>FunctionImputation</h3>
<p>The final implemented decorator is used to impute missing d/p/q/r methods. We will return to the <code>FunctionImputation</code> decorator in a <a href="https://alan-turing-institute.github.io/distr6/articles/webs/custom_distributions.html">future tutorial</a> which looks at constructing custom distributions.</p>
</div>
</div>
<div id="how-to-decorate" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-decorate" class="anchor"></a>How to Decorate</h2>
<p>There are two main ways to decorate distributions in distr6, either in construction or after construction. We show these by example:</p>
<p>In Construction</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">Normal</span>$<span class="fu">new</span>(<span class="kw">decorators</span> <span class="kw">=</span> <span class="st">"CoreStatistics"</span>)
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span>
<span class="no">Normal</span>$<span class="fu">new</span>(<span class="kw">decorators</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"CoreStatistics"</span>, <span class="st">"ExoticStatistics"</span>))
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span></pre></body></html></div>
<p>After Construction</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">N</span> <span class="kw">&lt;-</span> <span class="no">Normal</span>$<span class="fu">new</span>()
<span class="fu"><a href="../../reference/decorate.html">decorate</a></span>(<span class="no">N</span>, <span class="st">"CoreStatistics"</span>)
<span class="co">#&gt; Normal is now decorated with CoreStatistics</span>
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span>

<span class="co"># Or piping as in the last tutorial</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)
<span class="no">Normal</span>$<span class="fu">new</span>() <span class="kw">%&gt;%</span> <span class="fu"><a href="../../reference/decorate.html">decorate</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"CoreStatistics"</span>, <span class="st">"ExoticStatistics"</span>))
<span class="co">#&gt; Normal is now decorated with CoreStatistics, ExoticStatistics</span>
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span></pre></body></html></div>
<p>And that’s all there is to it! If you forget which decorators are available, just run <code><a href="../../reference/listDecorators.html">listDecorators()</a></code>, or <code><a href="../../reference/listDecorators.html">listDecorators(simplify = FALSE)</a></code> if you want to see which methods they include at the same time.</p>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>In this tutorial we looked at decorators in distr6 to obtain numeric results, methods for statistical modelling and imputation methods for missing d/p/q/r functions. In the <a href="https://alan-turing-institute.github.io/distr6/articles/webs/wrappers.html">next tutorial</a> we look at the next big feature in distr6, wrappers.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-GoF">
<p>Gamma, Erich, Richard Helm, Ralph Johnson, and John Vlissides. 1994. “Design Patterns: Elements of Reusable Object-Oriented Software.” Addison-Wesley.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Raphael Sonabend, Franz Kiraly.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c08037a20302b0f7fe5a1b7060957f04',
    indexName: 'distr6',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
