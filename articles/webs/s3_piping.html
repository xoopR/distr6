<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S3 and Piping • distr6</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="S3 and Piping">
<meta property="og:description" content="distr6">
<meta property="og:image" content="https://xoopr.github.io/distr6/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">distr6</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.8.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Basic
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/intro_to_r6.html">Introduction to R6</a>
    </li>
    <li>
      <a href="../../articles/webs/constructing_a_distribution.html">Constructing a Distribution</a>
    </li>
    <li>
      <a href="../../articles/webs/parameters.html">Getting and Setting Parameters</a>
    </li>
    <li>
      <a href="../../articles/webs/statistical_methods.html">Statistical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/properties_traits.html">Properties and Traits</a>
    </li>
    <li>
      <a href="../../articles/webs/multivariates.html">Multivariate Distributions</a>
    </li>
    <li>
      <a href="../../articles/webs/listing.html">Listing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/decorators.html">Decorators</a>
    </li>
    <li>
      <a href="../../articles/webs/wrappers.html">Wrappers</a>
    </li>
    <li>
      <a href="../../articles/webs/custom_distributions.html">Custom Distributions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Appendices
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://raphaels1.github.io/pdfs/distr6Cheatsheet.pdf" class="external-link">Cheatsheet</a>
    </li>
    <li>
      <a href="../../articles/webs/r6_and_design_patterns.html">R6 and Design Patterns</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/RaphaelS1/distr6" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>S3 and Piping</h1>
            
            <h4 data-toc-skip class="date">2024-02-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/xoopr/distr6/blob/HEAD/vignettes/webs/s3_piping.rmd" class="external-link"><code>vignettes/webs/s3_piping.rmd</code></a></small>
      <div class="hidden name"><code>s3_piping.rmd</code></div>

    </div>

    
    
<p>The next set of tutorials focuses on more advanced functionality in
distr6. This is not to say that the code itself may be any more complex,
but that the use-cases for this functionality is more advanced. Examples
of these include composite distributions, decorators for numeric results
and piping methods. We start with S3 and piping as these (especially S3)
will be familiar concepts to most users, are available in distr6 but are
not part of the core functionality.</p>
<div class="section level2">
<h2 id="s3">S3<a class="anchor" aria-label="anchor" href="#s3"></a>
</h2>
<p>Using the R62S3 package <span class="citation">(Sonabend 2019)</span>
most R6 methods in distr6 can instead be called as an S3 method. Even if
you’re not aware of it, you’ve probably used S3 every time you’ve opened
R. For example the <code>plot</code> function produces a different plot
depending on what object it’s called on, a numeric, a linear regression
model, or something more complicated, this is because of the S3 dispatch
system. Every distribution, kernel, parameter set, wrapper and decorator
method is available through S3. Note that constructors always use R6
syntax, i.e. <code>$new()</code>. Below are some examples, see the
documentation help pages for the different S3 and R6 syntax but remember
these are almost identical except that the first argument in S3 will be
the object whereas this is omitted in the R6 usage.</p>
<p>You can select which classes to create methods for with R62S3, below
we are just interested in methods associated with the
<code>Distribution</code> class, but this will work with any R6 class in
{distr6}.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## generate methods from the public methods and active bindings of `Distribution`</span></span>
<span><span class="fu">R62S3</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/R62S3/man/R62Fun.html" class="external-link">R62Fun</a></span><span class="op">(</span><span class="va">Distribution</span>, assignEnvir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-topenv.html" class="external-link">topenv</a></span><span class="op">(</span><span class="op">)</span>, scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"public"</span>, <span class="st">"active"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">N</span> <span class="op">&lt;-</span> <span class="va"><a href="../../reference/Normal.html">Normal</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">N</span><span class="op">$</span><span class="fu">pdf</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="co"># R6</span></span>
<span><span class="co">#&gt; [1] 0.24197072 0.05399097</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/grDevices/pdf.html" class="external-link">pdf</a></span><span class="op">(</span><span class="va">N</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="co"># S3</span></span>
<span><span class="co">#&gt; [1] 0.24197072 0.05399097</span></span>
<span></span>
<span><span class="va">N</span><span class="op">$</span><span class="fu">summary</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Normal Probability Distribution. </span></span>
<span><span class="co">#&gt; Parameterised with:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;        Id Support  Value            Tags</span></span>
<span><span class="co">#&gt;    &lt;char&gt;  &lt;char&gt; &lt;list&gt;          &lt;list&gt;</span></span>
<span><span class="co">#&gt; 1:   mean       ℝ      0        required</span></span>
<span><span class="co">#&gt; 2:   prec      ℝ+        linked,required</span></span>
<span><span class="co">#&gt; 3:     sd      ℝ+        linked,required</span></span>
<span><span class="co">#&gt; 4:    var      ℝ+      1 linked,required</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Quick Statistics</span></span>
<span><span class="co">#&gt;  Mean:       0</span></span>
<span><span class="co">#&gt;  Variance:   1</span></span>
<span><span class="co">#&gt;  Skewness:   0</span></span>
<span><span class="co">#&gt;  Ex. Kurtosis:   0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Support: ℝ   Scientific Type: ℝ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Traits:      continuous; univariate</span></span>
<span><span class="co">#&gt; Properties:  symmetric; mesokurtic; no skew</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span></span>
<span><span class="co">#&gt; Normal Probability Distribution. </span></span>
<span><span class="co">#&gt; Parameterised with:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;        Id Support  Value            Tags</span></span>
<span><span class="co">#&gt;    &lt;char&gt;  &lt;char&gt; &lt;list&gt;          &lt;list&gt;</span></span>
<span><span class="co">#&gt; 1:   mean       ℝ      0        required</span></span>
<span><span class="co">#&gt; 2:   prec      ℝ+        linked,required</span></span>
<span><span class="co">#&gt; 3:     sd      ℝ+        linked,required</span></span>
<span><span class="co">#&gt; 4:    var      ℝ+      1 linked,required</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Quick Statistics</span></span>
<span><span class="co">#&gt;  Mean:       0</span></span>
<span><span class="co">#&gt;  Variance:   1</span></span>
<span><span class="co">#&gt;  Skewness:   0</span></span>
<span><span class="co">#&gt;  Ex. Kurtosis:   0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Support: ℝ   Scientific Type: ℝ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Traits:      continuous; univariate</span></span>
<span><span class="co">#&gt; Properties:  symmetric; mesokurtic; no skew</span></span>
<span></span>
<span><span class="fu">setParameterValue</span><span class="op">(</span><span class="va">N</span>,var <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu">getParameterValue</span><span class="op">(</span><span class="va">N</span>, <span class="st">"var"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="piping">Piping<a class="anchor" aria-label="anchor" href="#piping"></a>
</h2>
<p>We won’t go into too much detail about piping because it will be
familiar to users who need to make use of it and may not be necessary
for others. Piping is the process of calling functions in a set order
using the pipe, <code>%&gt;%</code> notation, from the magrittr package
<span class="citation">(Milton Bache and Wickham 2014)</span>. We
specifically mention piping because it goes hand-in-hand with method
chaining, which we discussed in the <a href="https://xoopr.github.io/distr6/articles/webs/intro_to_r6.html">introduction
to R6 tutorial</a>. Below are some examples of how piping can be used in
distr6.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="va"><a href="../../reference/Normal.html">Normal</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">setParameterValue</span><span class="op">(</span>var <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">getParameterValue</span><span class="op">(</span><span class="st">"var"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span></span>
<span></span>
<span><span class="co">## generate methods from the public methods and active bindings of `ExoticStatistics`</span></span>
<span><span class="fu">R62S3</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/R62S3/man/R62Fun.html" class="external-link">R62Fun</a></span><span class="op">(</span><span class="va">ExoticStatistics</span>, assignEnvir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ns-topenv.html" class="external-link">topenv</a></span><span class="op">(</span><span class="op">)</span>, scope <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"public"</span>, <span class="st">"active"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Don't worry about unfamiliar functions used here, we return to this in the next tutorial</span></span>
<span><span class="va"><a href="../../reference/Normal.html">Normal</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../../reference/decorate.html">decorate</a></span><span class="op">(</span><span class="st">"ExoticStatistics"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">hazard</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Normal is now decorated with ExoticStatistics</span></span>
<span><span class="co">#&gt; [1] 2.373216</span></span></code></pre></div>
<p>Notice that usually the S3 methods require the first argument to be
the object, in this case <code>N</code> or <code>Normal$new()</code> but
by using the pipe notation, this is filled automatically. For a more
in-depth tutorial on magrittr <a href="https://magrittr.tidyverse.org/" class="external-link">see here</a>.</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>In this tutorial we covered using S3 and piping instead of/as well as
R6 syntax in distr6. These allow you to use whichever syntax you’re most
comfortable with whilst maintaining the integrity of a well-designed and
(hopefully) user-friendly object-oriented interface. In the <a href="https://xoopr.github.io/distr6/articles/webs/decorators.html">next
tutorial</a> we look at another big feature in distr6, decorators.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-magrittr" class="csl-entry">
Milton Bache, Stefan, and Hadley Wickham. 2014. <span>“Magrittr: A
Forward-Pipe Operator for R.”</span> CRAN. <a href="https://CRAN.R-project.org/package=magrittr" class="external-link">https://CRAN.R-project.org/package=magrittr</a>.
</div>
<div id="ref-r62s3" class="csl-entry">
Sonabend, Raphael. 2019. <span>“R62S3: Automatic Method Generation from
R6.”</span> CRAN. <a href="https://CRAN.R-project.org/package=R62S3" class="external-link">https://CRAN.R-project.org/package=R62S3</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Raphael Sonabend, Franz Kiraly.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c08037a20302b0f7fe5a1b7060957f04',
    indexName: 'distr6',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
