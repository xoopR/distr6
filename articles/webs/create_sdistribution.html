<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating an SDistribution • distr6</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Creating an SDistribution">
<meta property="og:description" content="distr6">
<meta property="og:image" content="https://alan-turing-institute.github.io/distr6/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">distr6</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.6.15</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Basic
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/intro_to_r6.html">Introduction to R6</a>
    </li>
    <li>
      <a href="../../articles/webs/constructing_a_distribution.html">Constructing a Distribution</a>
    </li>
    <li>
      <a href="../../articles/webs/parameters.html">Getting and Setting Parameters</a>
    </li>
    <li>
      <a href="../../articles/webs/statistical_methods.html">Statistical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/properties_traits.html">Properties and Traits</a>
    </li>
    <li>
      <a href="../../articles/webs/multivariates.html">Multivariate Distributions</a>
    </li>
    <li>
      <a href="../../articles/webs/listing.html">Listing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/s3_piping.html">S3 and Piping</a>
    </li>
    <li>
      <a href="../../articles/webs/decorators.html">Decorators</a>
    </li>
    <li>
      <a href="../../articles/webs/wrappers.html">Wrappers</a>
    </li>
    <li>
      <a href="../../articles/webs/custom_distributions.html">Custom Distributions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extension Guidelines
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/preliminaries.html">Preliminaries</a>
    </li>
    <li>
      <a href="../../articles/webs/create_sdistribution.html">Creating an SDistribution</a>
    </li>
    <li>
      <a href="../../articles/webs/create_kernel.html">Creating a Kernel</a>
    </li>
    <li>
      <a href="../../articles/webs/create_decorator.html">Creating a Decorator</a>
    </li>
    <li>
      <a href="../../articles/webs/create_wrapper.html">Creating a Wrapper</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Appendices
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://raphaels1.github.io/pdfs/distr6Cheatsheet.pdf" class="external-link">Cheatsheet</a>
    </li>
    <li>
      <a href="../../articles/webs/api_lifecycle.html">API Lifecycle</a>
    </li>
    <li>
      <a href="../../articles/webs/analytic_and_numeric_methods.html">Analytical and Numerical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/r6_and_design_patterns.html">R6 and Design Patterns</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/RaphaelS1/distr6" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating an SDistribution</h1>
            
            <h4 data-toc-skip class="date">2023-06-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/alan-turing-institute/distr6/blob/HEAD/vignettes/webs/create_sdistribution.rmd" class="external-link"><code>vignettes/webs/create_sdistribution.rmd</code></a></small>
      <div class="hidden name"><code>create_sdistribution.rmd</code></div>

    </div>

    
    
<p>This tutorial assumes that you have a good knowledge of R6 and so we
will not be going through the basics of inheritance and private/public
methods/variables.</p>
<div class="section level2">
<h2 id="sdistribution-class">SDistribution Class<a class="anchor" aria-label="anchor" href="#sdistribution-class"></a>
</h2>
<p>All implemented probability distributions (excluding Kernels) in
distr6 inherit from the <code>SDistribution</code> class. This means
they share a common interface. The only differences between these
distributions is that some will have methods missing as no analytic
results are available. See the <a href="https://raw.githubusercontent.com/wiki/alan-turing-institute/distr6/images/uml.png" class="external-link">uml
diagram</a> for an overview of how this all fits in together. A core
design principle in distr6 is that only analytical methods are defined
in the SDistribution child classes, all numerical results are available
through decorators. See the <a href="https://alan-turing-institute.github.io/distr6/articles/webs/decorators.html">decorators</a>
tutorial for more information on decorators and the <a href="https://alan-turing-institute.github.io/distr6/articles/webs/analytic_and_numeric_methods.html">analytical
and numerical</a> article for further discussions on analytical and
numerical methods. The summary is that when creating your own
SDistribution class, please do not put any numerical methods in the core
interface, if a closed form expression cannot be found, omit the method
entirely and it can be imputed with a decorator. If your desired method
is not available in one of our decorators but you think it is useful,
see the <a href="https://alan-turing-institute.github.io/distr6/articles/webs/create_decorator.html">creating
a decorator</a> extension guidelines.</p>
</div>
<div class="section level2">
<h2 id="creating-an-sdistribution">Creating an SDistribution<a class="anchor" aria-label="anchor" href="#creating-an-sdistribution"></a>
</h2>
<div class="section level3">
<h3 id="sdistribution-variables">SDistribution Variables<a class="anchor" aria-label="anchor" href="#sdistribution-variables"></a>
</h3>
<p>Every class inheriting from SDistribution must have the following
public variables:</p>
<ul>
<li>name - Full (unique) name of probability distribution</li>
<li>short_name - Short name (unique) id for distribution</li>
<li>description - Short description, usually just the name</li>
<li>package - The package in which the d/p/q/r functions are
written</li>
</ul>
<p>For the Normal distribution, the above all looks like</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Normal</span> <span class="op">&lt;-</span> <span class="fu">R6</span><span class="fu">::</span><span class="kw"><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></span><span class="op">(</span><span class="st">"Normal"</span>, inherit <span class="op">=</span> <span class="va">SDistribution</span>, lock_objects <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"name"</span>,<span class="st">"Normal"</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"short_name"</span>,<span class="st">"Norm"</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"description"</span>,<span class="st">"Normal Probability Distribution."</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"package"</span>,<span class="st">"stats"</span><span class="op">)</span></span></code></pre></div>
<p>Note:</p>
<ol style="list-style-type: decimal">
<li>It is very important that <code>lock_objects=F</code> is not left
out as it ensures decorators work correctly.</li>
<li>We use the R6 convention of defining the class as succinctly as
possible (class name and inherited classes) and then using the
<code>set</code> method to add private/public variables/methods</li>
</ol>
</div>
<div class="section level3">
<h3 id="sdistribution-methods">SDistribution Methods<a class="anchor" aria-label="anchor" href="#sdistribution-methods"></a>
</h3>
<p>For the full list of methods to (optimally) include see the
‘Statistical Methods’ section in the help pages of SDistribution:
<code><a href="../../reference/SDistribution.html">?SDistribution</a></code>. This <strong>does not</strong> include
pdf/cdf/quantile/rand, these are defined in the constructor and not in
the class. Once again, if there is no closed form analytical expression
possible, omit the method completely.</p>
<p>The following methods are included by default and can therefore by
omitted from the class definition:</p>
<ol style="list-style-type: decimal">
<li>prec</li>
<li>correlation</li>
<li>stdev</li>
<li>median</li>
<li>iqr</li>
</ol>
<p>Additionally the <code>pgf</code> method returns NaN if omitted but
this can be overloaded by including the method in the class definition.
Below is an example of adding four methods to the Normal
distribution</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"mean"</span>,<span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="fu">getParameterValue</span><span class="op">(</span><span class="st">"mean"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"variance"</span>,<span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="fu">getParameterValue</span><span class="op">(</span><span class="st">"var"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>,<span class="st">"skewness"</span>,<span class="kw">function</span><span class="op">(</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">Normal</span><span class="op">$</span><span class="fu">set</span><span class="op">(</span><span class="st">"public"</span>, <span class="st">"mgf"</span>, <span class="kw">function</span><span class="op">(</span><span class="va">t</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="fu">getParameterValue</span><span class="op">(</span><span class="st">"mean"</span><span class="op">)</span> <span class="op">*</span> <span class="va">t</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="va">self</span><span class="op">$</span><span class="fu">getParameterValue</span><span class="op">(</span><span class="st">"var"</span><span class="op">)</span> <span class="op">*</span> <span class="va">t</span><span class="op">^</span><span class="fl">2</span> <span class="op">*</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>Note:</p>
<ol style="list-style-type: decimal">
<li>Methods that require parameters use the <code>self</code> keyword
and the <code>getParameterValue</code> method, we looked at this in the
<a href="https://alan-turing-institute.github.io/distr6/articles/webs/custom_distributions.html">custom
distribution tutorial</a>
</li>
<li>The arguments to the methods are not optional, they must have the
names given in the <code><a href="../../reference/SDistribution.html">?SDistribution</a></code> help page, this ensures
that the automated S3 dispatch methods run correctly</li>
</ol>
</div>
<div class="section level3">
<h3 id="the-constructor">The Constructor<a class="anchor" aria-label="anchor" href="#the-constructor"></a>
</h3>
<p>The constructor for all SDistribution objects looks the same, below
is the constructor for the Normal distribution, which we will talk
through as an example.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>initialize <span class="ot">=</span> <span class="cf">function</span>(<span class="at">mean =</span> <span class="cn">NULL</span>, <span class="at">var =</span> <span class="cn">NULL</span>, <span class="at">sd =</span> <span class="cn">NULL</span>, <span class="at">prec =</span> <span class="cn">NULL</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">decorators =</span> <span class="cn">NULL</span>) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  super<span class="sc">$</span><span class="fu">initialize</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">decorators =</span> decorators,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">support =</span> Reals<span class="sc">$</span><span class="fu">new</span>(),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">symmetry =</span> <span class="st">"sym"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> Reals<span class="sc">$</span><span class="fu">new</span>()</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Note the following:</p>
<ol style="list-style-type: decimal">
<li>The arguments to the constructor include all possible
parameterisations; all are NULL by default as defaults are set in
<code>getParameterSet.Normal</code>.</li>
<li>Every constructor is a simple call to the super initialize method
and we only pass through the objects symmetry, support, type, and
decorators.</li>
</ol>
<p>And that’s it!</p>
</div>
<div class="section level3">
<h3 id="getparameterset">getParameterSet<a class="anchor" aria-label="anchor" href="#getparameterset"></a>
</h3>
<p>In a separate script called getParameterSet.R we have the generic and
dispatch methods for every SDistribution. <a href="https://cran.r-project.org/package=param6" class="external-link">param6</a> is used to
handle parameter sets. Below is the <code>getParameterSet</code> method
for the Normal distribution</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">getParameterSet.Normal</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="fu">pset</span><span class="op">(</span></span>
<span>  <span class="fu">prm</span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"reals"</span>, <span class="fl">0</span>, tags <span class="op">=</span> <span class="st">"required"</span><span class="op">)</span>,</span>
<span>  <span class="fu">prm</span><span class="op">(</span><span class="st">"var"</span>, <span class="st">"posreals"</span>, <span class="fl">1</span>, tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linked"</span>, <span class="st">"required"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu">prm</span><span class="op">(</span><span class="st">"sd"</span>, <span class="st">"posreals"</span>, tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linked"</span>, <span class="st">"required"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu">prm</span><span class="op">(</span><span class="st">"prec"</span>, <span class="st">"posreals"</span>, tags <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linked"</span>, <span class="st">"required"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  trafo <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">self</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>    <span class="va">vars</span> <span class="op">&lt;-</span> <span class="va">sds</span> <span class="op">&lt;-</span> <span class="va">precs</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"sd"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu">list_element</span><span class="op">(</span><span class="va">x</span>, <span class="st">"sd"</span><span class="op">)</span></span>
<span>      <span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">sds</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"sd"</span>, <span class="st">"var"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">sds</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"prec"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">precs</span> <span class="op">&lt;-</span> <span class="fu">list_element</span><span class="op">(</span><span class="va">x</span>, <span class="st">"prec"</span><span class="op">)</span></span>
<span>      <span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">precs</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"prec"</span>, <span class="st">"var"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">precs</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu">list_element</span><span class="op">(</span><span class="va">x</span>, <span class="st">"var"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">sds</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">sds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"var"</span>, <span class="st">"sd"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">precs</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">precs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"var"</span>, <span class="st">"prec"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vars</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="fu">unique_nlist</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vars</span>, <span class="va">sds</span>, <span class="va">precs</span>, <span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Note:</p>
<ol style="list-style-type: decimal">
<li>This is a dispatch method so the method name is
<code>getParameterSet.Normal</code>
</li>
<li>Defaults are set within the <code>prm</code> objects</li>
<li>Parameters that are ‘linked’, i.e. where only one can be set are
given the ‘linked’ tag. All parameters have the ‘required’ tag.</li>
<li>The transformation <code>trafo</code> function is used to calculate
the other linked arguments. This is vectorised to handle
<code>VectorDistributions</code>.</li>
</ol>
<p>## Summary</p>
<p>That’s everything that is required to create your own SDistribution
class. In summary the different components include</p>
<ol style="list-style-type: decimal">
<li>The 5 public variables</li>
<li>Public methods: ‘statistical methods’ section in
<code><a href="../../reference/SDistribution.html">?SDistribution</a></code>
</li>
<li>The constructor</li>
<li>
<code>getParameterSet</code> dispatch method, written in the
<code>getParameterSet.R</code> script</li>
</ol>
<p>## Extension Guidelines</p>
<ul>
<li><a href="https://alan-turing-institute.github.io/distr6/articles/webs/create_kernel.html">Kernel</a></li>
<li><a href="https://alan-turing-institute.github.io/distr6/articles/webs/create_wrapper.html">Wrapper</a></li>
<li><a href="https://alan-turing-institute.github.io/distr6/articles/webs/create_decorator.html">Decorator</a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Raphael Sonabend, Franz Kiraly.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c08037a20302b0f7fe5a1b7060957f04',
    indexName: 'distr6',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
