<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to R6 • distr6</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Introduction to R6">
<meta property="og:description" content="distr6">
<meta property="og:image" content="https://alan-turing-institute.github.io/distr6/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">distr6</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basic
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/intro_to_r6.html">Introduction to R6</a>
    </li>
    <li>
      <a href="../../articles/webs/constructing_a_distribution.html">Constructing a Distribution</a>
    </li>
    <li>
      <a href="../../articles/webs/parameters.html">Getting and Setting Parameters</a>
    </li>
    <li>
      <a href="../../articles/webs/statistical_methods.html">Statistical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/properties_traits.html">Properties and Traits</a>
    </li>
    <li>
      <a href="../../articles/webs/multivariates.html">Multivariate Distributions</a>
    </li>
    <li>
      <a href="../../articles/webs/listing.html">Listing</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/s3_piping.html">S3 and Piping</a>
    </li>
    <li>
      <a href="../../articles/webs/decorators.html">Decorators</a>
    </li>
    <li>
      <a href="../../articles/webs/wrappers.html">Wrappers</a>
    </li>
    <li>
      <a href="../../articles/webs/custom_distributions.html">Custom Distributions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extension Guidelines
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/webs/preliminaries.html">Preliminaries</a>
    </li>
    <li>
      <a href="../../articles/webs/create_sdistribution.html">Creating an SDistribution</a>
    </li>
    <li>
      <a href="../../articles/webs/create_kernel.html">Creating a Kernel</a>
    </li>
    <li>
      <a href="../../articles/webs/create_decorator.html">Creating a Decorator</a>
    </li>
    <li>
      <a href="../../articles/webs/create_wrapper.html">Creating a Wrapper</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendices
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://raphaels1.github.io/pdfs/distr6Cheatsheet.pdf">Cheatsheet</a>
    </li>
    <li>
      <a href="../../articles/webs/api_lifecycle.html">API Lifecycle</a>
    </li>
    <li>
      <a href="../../articles/webs/analytic_and_numeric_methods.html">Analytical and Numerical Methods</a>
    </li>
    <li>
      <a href="../../articles/webs/r6_and_design_patterns.html">R6 and Design Patterns</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/">Reference</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/RaphaelS1/distr6">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="intro_to_r6_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to R6</h1>
            
            <h4 class="date">2020-09-12</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/alan-turing-institute/distr6/blob/master/vignettes/webs/intro_to_r6.rmd"><code>vignettes/webs/intro_to_r6.rmd</code></a></small>
      <div class="hidden name"><code>intro_to_r6.rmd</code></div>

    </div>

    
    
<p>The purpose of this tutorial is to give a very brief introduction to R6, limited to the functionality needed to go through the basic tutorials that are in this website. This includes: dollar sign notation, construction, methods &amp; chaining, and cloning.</p>
<div id="what-is-r6" class="section level2">
<h2 class="hasAnchor">
<a href="#what-is-r6" class="anchor"></a>What is R6?</h2>
<p>We won’t go into a full history of R here but we will give a very quick overview. R is a functional programming language that contains some object-oriented paradigms, namely S3, S4, R5 and R6. This means that whilst the majority of your time in R will be spent calling functions on variables with different arguments, it is also possible to create ‘objects’ that store data and are editable via methods. A method is essentially a function that is stored and acts on the object.</p>
<div id="classes-and-objects-in-r6" class="section level3">
<h3 class="hasAnchor">
<a href="#classes-and-objects-in-r6" class="anchor"></a>Classes and Objects in R6</h3>
<p>An object is an instance of a class, an instance is created by construction. In simpler and more practical terms: probability distributions in distr6 are stored as ‘classes’ and to use these distributions they have to be ‘constructed’. We will cover the construction of distributions in distr6 in the next tutorial, so for now we just focus on the R6 specifics.</p>
</div>
</div>
<div id="constructing-a-class" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-class" class="anchor"></a>Constructing a Class</h2>
<p>Every distribution in distr6 is stored as a class, we will take the Normal distribution as an example. Note the R class type is an <code>R6ClassGenerator</code> this tells us that this is a class to be constructed (as opposed to an object that can be manipulated).</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="kw">Normal</span>)
<span class="co">#&gt; [1] "R6ClassGenerator"</span>
</pre></div>
<p>Constructing a class in R6 is always done using the same syntax <code>$new(...)</code> but the arguments passed to this function depend on the class. Just like functions in R these arguments can be named or un-named and a default may or may not be provided. In this case there is a default so the following does not produce an error</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">Normal</span><span class="op">$</span><span class="fu">new</span>()
<span class="co">#&gt; Norm(mean = 0, var = 1, sd = 1, prec = 1)</span>
</pre></div>
<p>But we can also pass arguments in the usual way</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">Normal</span><span class="op">$</span><span class="fu">new</span>(var = <span class="fl">2</span>)
<span class="co">#&gt; Norm(mean = 0, var = 2, sd = 1.4142135623731, prec = 0.5)</span>
</pre></div>
<p>See the help documentation for the specific arguments to pass to the constructor.</p>
</div>
<div id="methods" class="section level2">
<h2 class="hasAnchor">
<a href="#methods" class="anchor"></a>Methods</h2>
<p>Methods work in the exact same way as functions except that again the dollar sign notation is used, e.g. <code>object$method(...)</code>. Notice that the constructor <code>$new()</code> is used for <em>classes</em> whereas methods are called on <em>objects</em>. For example let’s construct a Normal distribution object and save this</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">N</span> <span class="op">&lt;-</span> <span class="kw">Normal</span><span class="op">$</span><span class="fu">new</span>()

<span class="co"># Notice the R class is now 'Normal'</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="kw">N</span>)
<span class="co">#&gt; [1] "Normal"        "SDistribution" "Distribution"  "R6"</span>
</pre></div>
<p>To call the method <code>mean</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">N</span><span class="op">$</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>()
<span class="co">#&gt; [1] 0</span>
</pre></div>
<p>Or a method with arguments:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="kw">N</span><span class="op">$</span><span class="fu"><a href="../../reference/kurtosis.html">kurtosis</a></span>(excess = <span class="fl">FALSE</span>)
<span class="co">#&gt; [1] 3</span>
</pre></div>
<p>A final point about methods is that they act on the object, this means that whilst some will produce an output such as the ones above, others will actually change the object. Whereas to update a variable in R you may run something like <code>y = y + 1</code> in R6 the change is made in the method:</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">N</span><span class="op">$</span><span class="fu"><a href="../../reference/getParameterValue.html">getParameterValue</a></span>(<span class="st">"var"</span>)
<span class="co">#&gt; [1] 1</span>
<span class="kw">N</span><span class="op">$</span><span class="fu"><a href="../../reference/setParameterValue.html">setParameterValue</a></span>(var = <span class="fl">5</span>)
<span class="kw">N</span><span class="op">$</span><span class="fu"><a href="../../reference/getParameterValue.html">getParameterValue</a></span>(<span class="st">"var"</span>)
<span class="co">#&gt; [1] 5</span>
</pre></div>
<p>Don’t worry about the particulars of these methods just yet, we will return to them in later tutorials. For now just remember that <code><a href="../../reference/setParameterValue.html">setParameterValue()</a></code> will update the object <code>N</code> without us having to manually save this.</p>
<div id="method-chaining" class="section level3">
<h3 class="hasAnchor">
<a href="#method-chaining" class="anchor"></a>Method Chaining</h3>
<p>Method chaining is a slightly more advanced topic and therefore we will only very briefly discuss it here. It is essentially the act of combining multiple methods into one line (or chain), for example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="kw">N</span><span class="op">$</span><span class="fu"><a href="../../reference/setParameterValue.html">setParameterValue</a></span>(var = <span class="fl">6</span>)<span class="op">$</span><span class="fu"><a href="../../reference/getParameterValue.html">getParameterValue</a></span>(<span class="st">"var"</span>)
<span class="co">#&gt; [1] 6</span>
</pre></div>
<p>See how we simply added one method to the end of the other using the same dollar sign syntax. Not all methods can be chained and do not worry if you don’t feel comfortable doing this, we’re just highlighting it for users more familiar with object-oriented programming.</p>
</div>
</div>
<div id="active-bindings" class="section level2">
<h2 class="hasAnchor">
<a href="#active-bindings" class="anchor"></a>Active Bindings</h2>
<p>Active bindings are similar to public variables, they are accessed using <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code>, and make the R6 object look as if its a list. In <code>distr6</code> all active bindings are read-only, and exist for object properties and traits. They differ from public methods as no <code>()</code> is required.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="kw">b</span> <span class="op">&lt;-</span> <span class="kw">Binomial</span><span class="op">$</span><span class="fu">new</span>()

<span class="co"># public variable</span>
<span class="kw">b</span><span class="op">$</span><span class="kw">name</span>
<span class="co">#&gt; [1] "Binomial"</span>

<span class="co"># active bindings</span>
<span class="kw">b</span><span class="op">$</span><span class="kw">kurtosisType</span>
<span class="co">#&gt; Deprecated. Use $properties$kurtosis instead.</span>
<span class="co">#&gt; NULL</span>
<span class="kw">b</span><span class="op">$</span><span class="kw">inf</span>
<span class="co">#&gt; [1] 0</span>

<span class="co"># public method</span>
<span class="kw">b</span><span class="op">$</span><span class="fu"><a href="../../reference/kurtosis.html">kurtosis</a></span>()
<span class="co">#&gt; [1] -0.2</span>
<span class="kw">b</span><span class="op">$</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span>()
<span class="co">#&gt; [1] 5</span>
</pre></div>
<p>In distr6, all mathematical functions are public methods (e.g. mean, variance, kurtosis), whereas all properties and traits are active bindings (e.g. kurtosisType, symmetry, inf, sup).</p>
</div>
<div id="cloning" class="section level2">
<h2 class="hasAnchor">
<a href="#cloning" class="anchor"></a>Cloning</h2>
<p>The final thing we discuss is an advanced topic but is very important in R6. The best way to demonstrate cloning is by example but don’t worry we won’t go into any of the technical details.</p>
<p>First we create a class called “adder”, again ignore the technicals here. Adder is a class with one method, which adds numbers to itself.</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="kw">adder</span> <span class="op">&lt;-</span> <span class="kw">R6</span>::<span class="fu"><a href="https://rdrr.io/pkg/R6/man/R6Class.html">R6Class</a></span>(<span class="st">"adder"</span>,public = <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(add = <span class="fu">function</span>(<span class="kw">y</span>){
  <span class="kw">self</span><span class="op">$</span><span class="kw">x</span> <span class="op">=</span> <span class="kw">self</span><span class="op">$</span><span class="kw">x</span> <span class="op">+</span> <span class="kw">y</span>
  <span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span>(<span class="kw">self</span>)}, x = <span class="fl">0</span>))
<span class="kw">a</span> <span class="op">=</span> <span class="kw">adder</span><span class="op">$</span><span class="fu">new</span>()
</pre></div>
<p>Here’s an example of it in action, see how the internal value is automatically updated without the object having to be re-saved.</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="kw">a</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 0</span>
<span class="kw">a</span><span class="op">$</span><span class="fu"><a href="https://rdrr.io/pkg/magrittr/man/aliases.html">add</a></span>(<span class="fl">2</span>)
<span class="kw">a</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 2</span>
</pre></div>
<p>Now comes the tricky part, watch what happens when we copy the object <code>a</code> via <code>b &lt;- a</code> (equivalently <code>b = a</code>)</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="kw">a</span> <span class="op">&lt;-</span> <span class="kw">adder</span><span class="op">$</span><span class="fu">new</span>()
<span class="kw">b</span> <span class="op">&lt;-</span> <span class="kw">a</span>
<span class="kw">a</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 0</span>
<span class="kw">b</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 0</span>
<span class="kw">b</span><span class="op">$</span><span class="fu"><a href="https://rdrr.io/pkg/magrittr/man/aliases.html">add</a></span>(<span class="fl">4</span>)
<span class="kw">b</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 4</span>
<span class="kw">a</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 4</span>
</pre></div>
<p>See what happened? Even though we only called the method on <code>b</code>, the results were copied back to <code>a</code>. Sometimes this can be very useful but often it can cause confusion if used by mistake. To get around this problem and create a completely separate copy, use the <code>$clone()</code> method:</p>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="kw">a</span> <span class="op">&lt;-</span> <span class="kw">adder</span><span class="op">$</span><span class="fu">new</span>()
<span class="kw">b</span> <span class="op">&lt;-</span> <span class="kw">a</span><span class="op">$</span><span class="fu">clone</span>()
<span class="kw">a</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 0</span>
<span class="kw">b</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 0</span>
<span class="kw">b</span><span class="op">$</span><span class="fu"><a href="https://rdrr.io/pkg/magrittr/man/aliases.html">add</a></span>(<span class="fl">4</span>)
<span class="kw">b</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 4</span>
<span class="kw">a</span><span class="op">$</span><span class="kw">x</span>
<span class="co">#&gt; [1] 0</span>
</pre></div>
<p>This can be a tricky concept to get your head around but try not to worry too much about it and just remember that copying using <code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code> or <code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code> will lead to the values of both variables being updated to always be the same; whereas copying using <code>$clone()</code> creates a completely separate object that is identical at the time of cloning but then remains independent.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Raphael Sonabend, Franz Kiraly.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'c08037a20302b0f7fe5a1b7060957f04',
    indexName: 'distr6',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
